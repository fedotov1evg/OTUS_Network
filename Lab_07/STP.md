## Домашняя работа. Развертывание коммутируемой сети с резервными каналами
##### Топология

![alt-текст](https://github.com/fedotov1evg/OTUS_Network/blob/main/Lab_07/pic/Shema.png "Схема")

##### Таблица адресации

| Устройство | Интерфейс	| IP-адрес	| Маска подсети	| 
| :--------: |:----------:| :--------:| :------------:|
| S1	| VLAN 1	| 192.168.1.1	| 255.255.255.0	|
| S2	| VLAN 1	| 192.168.1.2	| 255.255.255.0	|
| S3	| VLAN 1	| 192.168.1.2	| 255.255.255.0 |

---

### Задачи
##### Часть 1. Создание сети и настройка основных параметров устройства
##### Часть 2. Выбор корневого моста
##### Часть 3. Наблюдение за процессом выбора протоколом STP порта, исходя из стоимости портов
##### Часть 4. Наблюдение за процессом выбора протоколом STP порта, исходя из приоритета портов

---

#### Часть 1:	Создание сети и настройка основных параметров устройства
В части 1 вам предстоит настроить топологию сети и основные параметры маршрутизаторов.

##### Шаг 1:	Создайте сеть согласно топологии.
Подключите устройства, как показано в топологии, и подсоедините необходимые кабели.

##### Шаг 2:	Выполните инициализацию и перезагрузку коммутаторов.

##### Шаг 3:	Настройте базовые параметры каждого коммутатора.
a.	Отключите поиск DNS.

b.	Присвойте имена устройствам в соответствии с топологией.

c.	Назначьте class в качестве зашифрованного пароля доступа к привилегированному режиму.

d.	Назначьте cisco в качестве паролей консоли и VTY и активируйте вход для консоли и VTY каналов.

e.	Настройте logging synchronous для консольного канала.

f.	Настройте баннерное сообщение дня (MOTD) для предупреждения пользователей о запрете несанкционированного доступа.

g.	Задайте IP-адрес, указанный в таблице адресации для VLAN 1 на всех коммутаторах.

h.	Скопируйте текущую конфигурацию в файл загрузочной конфигурации.

> Команды настройки коммутаторов S1-S3

![alt-текст](https://github.com/fedotov1evg/OTUS_Network/blob/main/Lab_07/pic/1-3-1.png "Команды")

##### Шаг 4:	Проверьте связь.
Проверьте способность компьютеров обмениваться эхо-запросами.

> Успешно ли выполняется эхо-запрос от коммутатора S1 на коммутатор S2?	

![alt-текст](https://github.com/fedotov1evg/OTUS_Network/blob/main/Lab_07/pic/1-4-1.png)

> Успешно ли выполняется эхо-запрос от коммутатора S1 на коммутатор S3?

![alt-текст](https://github.com/fedotov1evg/OTUS_Network/blob/main/Lab_07/pic/1-4-2.png)

> Успешно ли выполняется эхо-запрос от коммутатора S2 на коммутатор S3?

![alt-текст](https://github.com/fedotov1evg/OTUS_Network/blob/main/Lab_07/pic/1-4-3.png)

---

#### Часть 2:	Определение корневого моста

##### Шаг 1:	Отключите все порты на коммутаторах.

![alt-текст](https://github.com/fedotov1evg/OTUS_Network/blob/main/Lab_07/pic/2-1-1.png)

##### Шаг 2:	Настройте подключенные порты в качестве транковых.

![alt-текст](https://github.com/fedotov1evg/OTUS_Network/blob/main/Lab_07/pic/2-2-1.png)

##### Шаг 3:	Включите порты F0/2 и F0/4 на всех коммутаторах.

![alt-текст](https://github.com/fedotov1evg/OTUS_Network/blob/main/Lab_07/pic/2-3.png)

![alt-текст](https://github.com/fedotov1evg/OTUS_Network/blob/main/Lab_07/pic/2-3-1.png)

![alt-текст](https://github.com/fedotov1evg/OTUS_Network/blob/main/Lab_07/pic/2-3-2.png)

![alt-текст](https://github.com/fedotov1evg/OTUS_Network/blob/main/Lab_07/pic/2-3-3.png)


##### Шаг 4:	Отобразите данные протокола spanning-tree.

![alt-текст](https://github.com/fedotov1evg/OTUS_Network/blob/main/Lab_07/pic/3-4-2.png)

![alt-текст](https://github.com/fedotov1evg/OTUS_Network/blob/main/Lab_07/pic/3-4-1.png)

![alt-текст](https://github.com/fedotov1evg/OTUS_Network/blob/main/Lab_07/pic/3-4-3.png)

![alt-текст](https://github.com/fedotov1evg/OTUS_Network/blob/main/Lab_07/pic/3-4-11.png)

![alt-текст](https://github.com/fedotov1evg/OTUS_Network/blob/main/Lab_07/pic/3-4-12.png)

>Какой коммутатор является корневым мостом? 
>>S3

>Почему этот коммутатор был выбран протоколом spanning-tree в качестве корневого моста?
>>Корневой мост выбирается по с самым низким BID (Root ID). Но поскольку данный параметр не редактировался, то на всех коммутаторах он одинаковый, и корневой мост выбран случайно среди равных.

>Какие порты на коммутаторе являются корневыми портами? 
>>S1 F0/4
>>S2 F0/4

>Какие порты на коммутаторе являются назначенными портами? 
>>S1 F0/2
>>S3 F0/2 F0/4

>Какой порт отображается в качестве альтернативного и в настоящее время заблокирован? 
>>S2 F0/2 

>Почему протокол spanning-tree выбрал этот порт в качестве невыделенного (заблокированного) порта?
>>Данный порт не был выбран в качестве корневого или назначенного порта. Т.к. в сумме параметров (приоритета , стоимости) данный порт является наихудшим.

---

#### Часть 3:	Наблюдение за процессом выбора протоколом STP порта, исходя из стоимости портов

##### Шаг 1:	Определите коммутатор с заблокированным портом.

>S2

##### Шаг 2:	Измените стоимость порта.

Изменение S2 на интерфейсе f0/4
![alt-текст](https://github.com/fedotov1evg/OTUS_Network/blob/main/Lab_07/pic/3-2-1.png)

##### Шаг 3:	Просмотрите изменения протокола spanning-tree.

Изменились параметры S2

Схема

![alt-текст](https://github.com/fedotov1evg/OTUS_Network/blob/main/Lab_07/pic/3-3-2s.png)

S2
![alt-текст](https://github.com/fedotov1evg/OTUS_Network/blob/main/Lab_07/pic/3-3-1.png)

S1
![alt-текст](https://github.com/fedotov1evg/OTUS_Network/blob/main/Lab_07/pic/3-3-2.png)

S3
![alt-текст](https://github.com/fedotov1evg/OTUS_Network/blob/main/Lab_07/pic/3-3-3.png)


##### Шаг 4:	Удалите изменения стоимости порта.

a Удаление стоймости порта на S2 (сеть не перестроилась)

![alt-текст](https://github.com/fedotov1evg/OTUS_Network/blob/main/Lab_07/pic/3-4-1.png)

b Возвращение схемы в исходное состояние

Схема
![alt-текст](https://github.com/fedotov1evg/OTUS_Network/blob/main/Lab_07/pic/3-4-s-b.png)


S1
![alt-текст](https://github.com/fedotov1evg/OTUS_Network/blob/main/Lab_07/pic/3-4-1b.png)


S2
![alt-текст](https://github.com/fedotov1evg/OTUS_Network/blob/main/Lab_07/pic/3-4-2b.png)


S3
![alt-текст](https://github.com/fedotov1evg/OTUS_Network/blob/main/Lab_07/pic/3-4-3b.png)


>Почему протокол spanning-tree заменяет ранее заблокированный порт на назначенный порт и блокирует порт, который был назначенным портом на другом коммутаторе?
>> Изменилась стоимость порта, поэтому STP пересчитывает маршрут и определяет оптимальный путь.
---

#### Часть 4:	Наблюдение за процессом выбора протоколом STP порта, исходя из приоритета портов

a.	Включите порты F0/1 и F0/3 на всех коммутаторах.

![alt-текст](https://github.com/fedotov1evg/OTUS_Network/blob/main/Lab_07/pic/4-1-1.png)

![alt-текст](https://github.com/fedotov1evg/OTUS_Network/blob/main/Lab_07/pic/2-3-3.png)

b.	Подождите 30 секунд, чтобы протокол STP завершил процесс перевода порта, после чего выполните команду show spanning-tree на коммутаторах некорневого моста. Обратите внимание, что порт корневого моста переместился на порт с меньшим номером, связанный с коммутатором корневого моста, и заблокировал предыдущий порт корневого моста.

![alt-текст](https://github.com/fedotov1evg/OTUS_Network/blob/main/Lab_07/pic/4-2-1.png)


> Какой порт выбран протоколом STP в качестве порта корневого моста на каждом коммутаторе некорневого моста?
>> S1 Fa 0/3
>> S2 Fa 0/3

> Почему протокол STP выбрал эти порты в качестве портов корневого моста на этих коммутаторах?
>> Среди портов подключеных к корневому мосту, они имеют самый низкий приоритет
---

#### Вопросы для повторения
> 1.	Какое значение протокол STP использует первым после выбора корневого моста, чтобы определить выбор порта?
>> Использует значение **Priority**

> 2.	Если первое значение на двух портах одинаково, какое следующее значение будет использовать протокол STP при выборе порта?
>> **cost**

> 3.	Если оба значения на двух портах равны, каким будет следующее значение, которое использует протокол STP при выборе порта?
>> **Prio.Nbr**

